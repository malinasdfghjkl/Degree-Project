<html lang="en">

<head>
    <title>FLYONE | Search</title>
    <link rel="stylesheet" href="../css/style.css" />
    <meta name="viewport" content=" width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
</head>

<body>
    <div id="headform">
        <div class="header" style="position: initial;">
            <div style="flex:1;margin: 2vw;">Menu</div>
            <div id="header-center"> <img style="height:10vh;" src="../icons-images/images/flyone-logo.png" /></div>
            <div style="flex:1;margin: 2vw;">Login</div>
        </div>



        <div style="text-align:center; font-family: Rubik; font-size: 30px; color: #FFFF;">
            <div>
                Book flight
                <div id="search-form">
                    <input class="text-input" type="text" placeholder="From" name="departure"/>
                    <input class="text-input" type="text" placeholder="To" name="destination"/>
                    <input class="text-input" type="date" placeholder="Departure date" name="date"/>
                   <!-- <input class="text-input" type="date" placeholder="Return date" />
                    <input class="text-input" type="number" placeholder="Adults" />-->
                    <input class="text-input" type="text" placeholder="Promo code" name="promo"/>
                </div>
            </div>
            <button onclick="save(); window.location='/date';" class="button-light-blue"> Search Flight</button>

        </div>
    </div>
 <script src="/js/app.js"></script>
 <script>
    function save(){
        var dep= document.getElementById("search-form").firstElementChild;   //prob seems to be that it thinkts the input is a div idk
        for(let i=0; i<4; i++){
            window.sessionStorage.setItem(dep.name, dep.value);
            dep=dep.nextElementSibling;
        }
        window.sessionStorage.setItem('price', 0);
    }
</script>
    <!--<script src="/js/trip-store.js"></script> 
    <script src="/js/my-account.js"></script>
   
    <script>
        var request = window.indexedDB.open("fly-database", 1);

        request.onerror = function (event) {
            console.log("DB error: ", event.target.error);
        };

        request.onsuccess = function (event) {
            var db = event.target.result;
            console.log("DB: ", db);
            console.log("Object store names: ", db.objectStoreNames);
        };

        request.onupgradeneeded = function (event) {
            var db = event.target.result;
            /*if (!db.objectStoreNames.contains("bookings")) {
                db.createObjectStore("bookings",
                    { keyPath: "id" }
                );
            }*/
            if (!db.objectStoreNames.contains("bookings")) {
                var currentBooking = db.createObjectStore("bookings",
                    { autoIncrement: true }
                );
                currentBooking.createIndex("current", "departure", { unique: false });
               // exchangeStore.createIndex("to_hub", "arrival", { unique: false });


                currentBooking.transaction.oncomplete = function (event) {
                    var bookingSpecs = [
                        { "departure": "test", "arrival": "test", "date": "test", "promo": "jest", "id": "1" },
                        { "departure": "hello", "arrival": "test", "date": "test", "promo": "jest", "id": "3" },
                        { "departure": "what", "arrival": "test", "date": "test", "promo": "jest", "id": "5" },
                    ];
                    var currentBooking = db
                        .transaction("bookings", "readwrite")
                        .objectStore("bookings");
                    for (var i = 0; i < bookingSpecs.length; i++) {
                        currentBooking.add(bookingSpecs[i]);
                    }
                };
            }
        };
    </script>-->


    <div class="bottom-menu">
        <a id="bottom-boxes" href="./start">Home</a>
        <a id="bottom-boxes" href="./search">Book</a>
        <a id="bottom-boxes">Bookings</a>
        <a id="bottom-boxes">More</a>
    </div>
</body>

</html>