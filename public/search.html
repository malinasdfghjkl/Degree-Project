<!DOCTYPE html>

<head>
    <title>FLYONE | Search</title>
    <link rel="stylesheet" href="../css/style.css" />
    <meta name="viewport" content=" width=device-width, initial-scale=1">
    <meta name="theme-color" content="#283F94">
    <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons-images/apple-touch-icon.png">
</head>

<body>
    <div id="headform">
        <div class="header" style="position: initial;">
            <div style="flex:1;margin: 2vw;">Menu</div>
            <div id="header-center"> <img style="height:10vh;" src="../icons-images/images/flyone-logo.png" /></div>
            <div style="flex:1;margin: 2vw;">Login</div>
        </div>

        <div style="text-align:center; font-family: Rubik; font-size: 30px; color: #FFFF;">
            <div>
                Book flight
                <div id="search-form">
                    <input class="text-input" type="text" placeholder="From" name="departure" />
                    <input class="text-input" type="text" placeholder="To" name="destination" />
                    <input class="text-input" type="date" placeholder="Departure date" name="date" />
                    <!-- <input class="text-input" type="date" placeholder="Return date" />
                    <input class="text-input" type="number" placeholder="Adults" />-->
                    <input class="text-input" type="text" placeholder="Promo code" name="promo" />
                </div>
            </div>
            <button onclick="save(); location='/date';" class="button-light-blue"> Search Flight</button>
        </div>
    </div>
    <div style=" margin:0%; padding:0%; left:0px; top: 30vh; bottom: 10vh; right:0px; position: absolute; z-index: -1;">
        <iframe id="map"
        width="100%"
        height="100%"
        style="border:0"
        loading="lazy"
        onloadstart="locate();"
        onerror="err();"
        referrerpolicy="no-referrer-when-downgrade"
        src="https://www.google.com/maps/embed/v1/view?key=AIzaSyBUJG-hM9LPK3UpLuPaXd0bpAlRWZL7178
          &center=47.0657328,28.8958778
          &zoom=5">
      </iframe> </div>

    <script src="/js/app.js"></script>
    <script>
        function save() {
            var dep = document.getElementById("search-form").firstElementChild;
            for (let i = 0; i < 4; i++) {
                window.sessionStorage.setItem(dep.name, dep.value);
                dep = dep.nextElementSibling;
            }
            window.sessionStorage.setItem('price', 0);
        }

        const map= document.getElementById("map");

        function locate(){
            var longlat;
            if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(work, fail);
            }else{
               // map.innerHTML="Geolocation is not supported."
            }
}

function work(position){
    map.src= "https://www.google.com/maps/embed/v1/view?key=AIzaSyBUJG-hM9LPK3UpLuPaXd0bpAlRWZL7178&center="+
    position.coords.latitude+","+position.coords.longitude+"&zoom=5";
    console.log(position.coords.latitude);
    console.log(position.coords.longitude);
}
function fail(err){
    console.log(err);
}

        function err(){
            map.innerHTML="The Map cannot be displayed at this time due to an error.";
        }
        
    </script>


    <div class="bottom-menu">
        <a id="bottom-boxes" href="./start">Home</a>
        <a id="bottom-boxes" href="./search">Book</a>
        <a id="bottom-boxes">Bookings</a>
        <a id="bottom-boxes">More</a>
    </div>
</body>

</html>